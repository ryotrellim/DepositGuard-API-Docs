<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>DepositGuard API</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["HTTP \u0026 HTML"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="HTTP & HTML">HTTP & HTML</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="depositguard-api">DepositGuard API</h1>

<p>The DepositGuard API offers simple and secure ways to manage funds for vacation and rental properties.</p>

<blockquote>
<p>Example HTTP requests and responses are available below.</p>
</blockquote>

<h3 id="typical-flow">Typical Flow</h3>

<ol>
<li> Collect client and server-side tokens.</li>
<li> Create an agreement.</li>
<li> Collect payment methods (with a direct post to DepositGuard).</li>
<li> Capture funds.</li>
<li> Collect payout methods.</li>
<li> Disburse security deposits and fees.</li>
</ol>

<h1 id="technical-overview">Technical Overview</h1>

<h3 id="important-headers">Important Headers</h3>

<ul>
<li>The <code class="prettyprint">content-type</code> header specifies the format of the request.  It is &lsquo;application/x-www-form-urlencoded&rsquo; when authenticating, and &#39;application/json&rsquo; otherwise.<br></li>
<li>The <code class="prettyprint">authorization</code> header confirms your application credentials when making server-side calls.</li>
<li>A <code class="prettyprint">location</code> header is returned any time a resource is created.</li>
<li>The <code class="prettyprint">response-type</code> will always be &#39;application/json&rsquo;.</li>
</ul>

<h3 id="need-access-or-help">Need Access or Help?</h3>

<p>Request credentials to the DepositGuard API or ask for assistance by emailing <a href="mailto:api@depositguard.com">api@depositguard.com</a>.</p>

          <h1 id="authentication">Authentication</h1>

<h2 id="server-side-token">Server-Side Token</h2>

<blockquote>
<p>Note the URL to receive the server-side token is /oauth/token </p>
</blockquote>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/oauth/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic &lt;Base64 encoded string of “clientId:secret”&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

grant_type=client_credentials
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Access-Token&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">28800</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Authenticate your application to make requests using an OAuth2 client credentials pattern.  Your application will then be <em>authorized</em> to manage any resources (agreements, payment methods, etc.) that it creates or owns.</p>

<aside class="warning">
Never share your clientId or secret and never expose these values to the client.
</aside>

<h3 id="response-reference">Response Reference</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>String</td>
<td>Prepend this string with &ldquo;Bearer&rdquo; (the token type) and use it as the authorization header in all requests until it expires.</td>
</tr>
<tr>
<td>token_type</td>
<td>String</td>
<td>Indicates that whoever has this token is given access.  &ldquo;Bearer&rdquo; is the only token type supported at this time.</td>
</tr>
<tr>
<td>expires_in</td>
<td>Integer</td>
<td>Time in milleseconds until the access token expires and a new one must be attained.</td>
</tr>
</tbody></table>

<aside class="notice">
It is not possible to refresh the access token.  You must attain another when the token expires.
</aside>

<aside class="notice">
Unlike all subsequent requests, the authentication endpoint requires the &ldquo;application/x-www-form-urlencoded&rsquo; content-type.
</aside>

<h2 id="client-side-key">Client-Side Key</h2>

<blockquote>
<p>Note the URL to receive a client-side key is /oauth/key </p>
</blockquote>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/oauth/key</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic &lt;Base64 encoded string of “clientId:secret”&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

grant_type=client_credentials
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"access_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;Access-Key&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">28800</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>A client-side key is used seperately by the client for security reasons.</p>

<h3 id="response-reference">Response Reference</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_key</td>
<td>String</td>
<td>Add this as a hidden form field when submitting the user&rsquo;s payment method directly to Deposit Guard.</td>
</tr>
<tr>
<td>expires_in</td>
<td>Integer</td>
<td>Time in milleseconds until the access token expires and a new one must be attained.</td>
</tr>
</tbody></table>

          <h1 id="agreements">Agreements</h1>

<p>Agreements are a necessary part of the DepositGuard API.  They establish trust and the bounds in which a transaction is expected to take place.  </p>

<h2 id="create-agreement">Create Agreement</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/agreements</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"dates"</span><span class="p">:{</span><span class="w">
       </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-dd 12:34:56Z"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-dd 12:34:56Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terms of the agreement go here"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"renter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"renter@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Austin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"78704"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 4th Street"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apt. 456"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"landlord"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"landlord@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Austin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"78704"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 4th Street"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apt. 456"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="p">:</span>  <span class="s">https://api.depositguard.com/agreements/d646e985-b895-4fb6-b121-b221e5daa9db</span>

</code></pre>

<p>An agreement is required before transfering funds to the DepositGuard fund and should be communicated and agreed to by all parties involved.</p>

<p>All fields are required unless otherwise marked <code class="prettyprint">optional</code>.</p>

<h3 id="request-reference">Request Reference</h3>

<p><strong>Root</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>external_id</td>
<td>String</td>
<td><code class="prettyprint">Optional.</code>  Can be used to match DepositGuard agreements with the integrator&rsquo;s systems.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>The current status of the agreement.  Values include: <code class="prettyprint">active</code> - The default staus of a new agreement.  <code class="prettyprint">completed</code> - Used when a an agreement terms are satisfied and disbursement is complete.  <code class="prettyprint">cancelled</code> - Used when an agreement is no longer valid.</td>
</tr>
</tbody></table>

<p><strong>Terms</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>ISO 8601 string</td>
<td>The start date for when the property will be occupied.</td>
</tr>
<tr>
<td>end_date</td>
<td>ISO 8601 string</td>
<td>The end date for when the property will be vacated.</td>
</tr>
<tr>
<td>text</td>
<td>String</td>
<td>Should be used to record the full terms of the rental agreement.</td>
</tr>
</tbody></table>

<p><strong>Renter &amp; Landlord</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>last_name</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>String</td>
<td>Should be stripped of dashes and periods.</td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>Must be a valid email address.</td>
</tr>
<tr>
<td>city</td>
<td>String</td>
<td>Full city name.  US-only.</td>
</tr>
<tr>
<td>state</td>
<td>String</td>
<td>Use the ANSI 2-letter state code.  US-only.</td>
</tr>
<tr>
<td>postal_code</td>
<td>String</td>
<td>5-digit postal code.  US-only.</td>
</tr>
<tr>
<td>address_line1</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td>address_line2</td>
<td>String</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get-agreement">Get Agreement</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/agreements/d646e985-b895-4fb6-b121-b221e5daa9db</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"agreement_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d646e985-b895-4fb6-b121-b221e5daa9db"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"dates"</span><span class="p">:{</span><span class="w">
       </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-dd 12:34:56Z"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-dd 12:34:56Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terms of the agreement go here"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"renter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"renter@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Austin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"78704"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 4th Street"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apt. 456"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"landlord"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"landlord@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Austin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"78704"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 4th Street"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apt. 456"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Fetching the agreement shows the same information used to create it, with the exception of a couple properties.</p>

<h3 id="response-reference">Response Reference</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agreement_id</td>
<td>GUID</td>
<td>Globally unique identifier of the agreement.  Not editable.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>The current status of the agreement.  Values include: <code class="prettyprint">active</code> - The default staus of a new agreement.  <code class="prettyprint">completed</code> - Used when a an agreement terms are satisfied and disbursement is complete.  <code class="prettyprint">cancelled</code> - Used when an agreement is no longer valid.</td>
</tr>
</tbody></table>

<h2 id="modify-agreement">Modify Agreement</h2>

<blockquote>
<p>Modifying an agreement requires a full PUT, which means even if you change one value, you still need to submit the entire body.</p>
</blockquote>
<pre class="highlight http"><code><span class="nf">PUT</span> <span class="nn">/agreements/d646e985-b895-4fb6-b121-b221e5daa9db</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"dates"</span><span class="p">:{</span><span class="w">
       </span><span class="nt">"start_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-dd 12:34:56Z"</span><span class="p">,</span><span class="w">
       </span><span class="nt">"end_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YYYY-MM-dd 12:34:56Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terms of the agreement go here"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"renter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buzz"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bazz"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"renter@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Austin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"78704"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 4th Street"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apt. 456"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"landlord"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"landlord@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Austin"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"78704"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 4th Street"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address_line2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apt. 456"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre>

<p>Modify an agreement to change the terms, contact information, or status.  </p>

<h2 id="cancel-agreement">Cancel Agreement</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/cancel</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"renter cancelled trip."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="p">:</span>  <span class="s">http://api.depositguard.com/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/history</span>
</code></pre>

<p>Cancels the agreement and all payments and payouts.  The agreement cannot be re-activated or resumed.  This can only be performed prior to the first payment.</p>

<h3 id="request-reference">Request Reference</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>note</td>
<td>String</td>
<td><code class="prettyprint">Optional.</code> Leaves a note for a historical purposes.</td>
</tr>
</tbody></table>

<h2 id="complete-agreement">Complete Agreement</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/cancel</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agreement end"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="p">:</span>  <span class="s">http://api.depositguard.com/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/complete</span>

</code></pre>

<p>Completes the agreement.  Use this when the agreement terms are fulfilled and all parties are satisfied.</p>

<h3 id="request-reference">Request Reference
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>note</td>
<td>String</td>
<td><code class="prettyprint">Optional.</code> Leaves a note for a historical purposes.</td>
</tr>
</tbody></table>

<h2 id="agreement-notes">Agreement Notes</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/cancel</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"renter requested and was sent images of property"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="p">:</span>  <span class="s">http://api.depositguard.com/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/notes</span>
</code></pre>

<p>Add an additional note to the agreement.</p>

<h3 id="request-reference">Request Reference</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>note</td>
<td>String</td>
<td>Leaves a note for a historical purposes.</td>
</tr>
</tbody></table>

<h2 id="agreement-history">Agreement History</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/history</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"agreement_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"events"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agreement_created"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-20T13:15:30Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"note"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"renter requested and was sent images of property"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-20T13:15:30Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agreement_modified"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-23T13:15:30Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"half of deposit"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-20T13:15:30Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-20T13:15:30Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"half of deposit"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agreement_complete"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-20T13:15:30Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payout"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full disbursement"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"date_created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-20T13:15:30Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieve a complete history of actions related to the agreement including financial logs.</p>

<h3 id="request-reference">Request Reference</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>agreement_id</td>
<td>GUID</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>Kind of event.  Values include: <code class="prettyprint">agreement_created</code>, <code class="prettyprint">agreement_modified</code>, <code class="prettyprint">agreement_complete</code>, <code class="prettyprint">agreement_cancelled</code>, <code class="prettyprint">payment</code>, <code class="prettyprint">payout</code>, and <code class="prettyprint">note</code></td>
</tr>
<tr>
<td>note</td>
<td>String</td>
<td>Returned if any note was left.</td>
</tr>
</tbody></table>

          <h1 id="payments">Payments</h1>

<p>The core of the DepositGuard API is the ability to securely capture and transfer funds.</p>

<h2 id="capture-payment-method">Capture Payment Method</h2>

<blockquote>
<p>The Direct Post Method requires a token that can only be used for client-side posts.</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;html&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"http://api.depositguard.net/paymentmethods"</span> 
  <span class="na">method=</span><span class="s">"POST"</span><span class="nt">&gt;</span> 
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"name"</span><span class="nt">&gt;</span>Name:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"cc_number"</span><span class="nt">&gt;</span>cc_number:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"cc_number"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"cvv"</span><span class="nt">&gt;</span>cvv:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"cvv"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"city"</span><span class="nt">&gt;</span>city:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"city"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"state"</span><span class="nt">&gt;</span>state:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"state"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"postal_code"</span><span class="nt">&gt;</span>postal_code:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"postal_code"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"address_line_1"</span><span class="nt">&gt;</span>address_line_1:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"address_line_1"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"address_line_2"</span><span class="nt">&gt;</span>address_line_2:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"address_line_2"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Save Payment Method"</span><span class="nt">/&gt;</span> 
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"access_key"</span> <span class="na">value=</span><span class="s">"ABC_XYX_123"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"redirect_url"</span> <span class="na">value=</span><span class="s">"https://www.merchantsite.com/process_nonce.aspx"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;/html&gt;</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/nonces/paymentmethods</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-nonce&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The renter needs to provide payment information to fund the account and eventually pay the landlord.  To do this, capture the information in a typical web form and submit the data directly to DepositGuard.  This is known in the industry as a direct post method (DPM).</p>

<h3 id="direct-post-method-flow">Direct Post Method Flow</h3>

<ol>
<li> Post (via form) the user&rsquo;s credit card info, form key, and redirect url directly to DepositGuard.</li>
<li> DepositGuard confirms the credit card and returns the user and a credit card <em>nonce</em> to the redirect url provided.</li>
<li> Activate the <em>nonce</em> with a server-side call and store it for re-use.  This step confirms to DepositGuard that the user successfully returned to the merchant&rsquo;s server and that the payment method was genuine.</li>
<li> Submit a payment request using the <em>nonce</em> to identify the payment method.  The response will confirm if the payment was successful or respond with an appropriate error message.</li>
</ol>

<p><em>What does this mean for PCI compliance?</em>  Ultimately, every company is responsible for their own PCI compliance.  At DepositGuard, we believe that transmiting cardholder data directly to our servers reduces the scope and complexity of our integrator&rsquo;s PCI requirements.</p>

<aside class="notice">
Payments can only be made with a credit card.</br>
</aside>

<aside class="notice">
Unlike the payment itself, payment methods are not explicitly associated with a user or with an agreement.
</aside>

<h2 id="payment">Payment</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/deposits</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"payment_method_nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6dcbd862-e01d-4639-a5b4-774bda55ed09"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.45"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"security_deposit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"half of deposit"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="p">:</span>  <span class="s">https://api.depositguard.com/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/deposits/eaf557ca-ee95-4939-951a-bd2b2e1047ce</span>
</code></pre>

<p>Authorizes and immediately charges a payment for the specified amount.  The value is held by DepositGuard until a payout is disbursed.</p>

<h3 id="request-reference">Request Reference</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_method_nonce</td>
<td>GUID</td>
<td></td>
</tr>
<tr>
<td>total</td>
<td>string</td>
<td>Amount to process.</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency to process the total as.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>Kind of payment.  Values include: <code class="prettyprint">rental</code> &amp; <code class="prettyprint">security_deposit</code></td>
</tr>
<tr>
<td>note</td>
<td>String</td>
<td>Adds a description for the payment.</td>
</tr>
</tbody></table>

<aside class="success">
Remember that the renter will receive their security deposit back on the card(s) used at the time that agreement is completed.
</aside>

          <h1 id="payouts">Payouts</h1>

<h2 id="capture-payout-method">Capture Payout Method</h2>
<pre class="highlight html"><code><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"http://api.depositguard.net/payoutmethods"</span> 
  <span class="na">method=</span><span class="s">"POST"</span><span class="nt">&gt;</span> 
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"account_number"</span><span class="nt">&gt;</span>Account Number:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"account_number"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"routing_number"</span><span class="nt">&gt;</span>Routing Number:<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"routing_number"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Save Payout Method"</span><span class="nt">/&gt;</span> 
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"key"</span> <span class="na">value=</span><span class="s">"ABC_XYX_123"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"redirect_url"</span> <span class="na">value=</span><span class="s">"https://www.merchantsite.com"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/nonces/payoutmethods</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payout-method-nonce&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The landlord needs to provide their bank account information so that DepositGuard can disburse the payout.  This is also a direct post that functions the same as above, but has a different form action, fields, and redirect url.</p>

<aside class="notice">
Disbursements can only be made via ACH transfer to a bank account.
</aside>

<h2 id="payout">Payout</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/disbursements</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;Access-Token&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.depositguard.com</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"payout_method_nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6dcbd862-e01d-4639-a5b4-774bda55ed09"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.45"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"half of deposit"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Location</span><span class="p">:</span>  <span class="s">https://api.depositguard.com/agreements/d646e985-b895-4fb6-b121-b221e5daa9db/disbursements/eaf557ca-ee95-4939-951a-bd2b2e1047ce</span>

</code></pre>

<p>Disburses funds from the fund pool.  Typically takes 3 to 7 business days.</p>

          <h1 id="errors">Errors</h1>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">400</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="nt">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid input"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">40006</span><span class="p">,</span><span class="w">
            </span><span class="nt">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terms.start_date"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"start_date is required."</span><span class="p">,</span><span class="w"> 
            </span><span class="nt">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Error"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="status-codes">Status Codes</h3>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Something is wrong with the request.  Check the error response for details.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>The authorization header is wrong or missing.  Re-authorize at <code class="prettyprint">/oauth/token</code>.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>You&rsquo;re attempting to access a resource that does not belong to you.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>The resource does not exist.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
<td>The resource does not support the method.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>There&rsquo;s a problem on the DepositGuard side.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>DepositGuard is temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="HTTP & HTML">HTTP & HTML</a>
          </div>
      </div>
    </div>
  </body>
</html>
